  [1m[36m (0.2ms)[0m  [1mCREATE TABLE "schema_migrations" ("version" varchar NOT NULL) [0m
  [1m[35m (100.1ms)[0m  select sqlite_version(*)
  [1m[36m (0.3ms)[0m  [1mCREATE UNIQUE INDEX "unique_schema_migrations" ON "schema_migrations" ("version")[0m
  [1m[35mActiveRecord::SchemaMigration Load (0.1ms)[0m  SELECT "schema_migrations".* FROM "schema_migrations"
Migrating to CreateDoorkeeperTables (20150303054803)
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.5ms)[0m  CREATE TABLE "oauth_applications" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar NOT NULL, "uid" varchar NOT NULL, "secret" varchar NOT NULL, "redirect_uri" text NOT NULL, "scopes" varchar DEFAULT '' NOT NULL, "created_at" datetime, "updated_at" datetime) 
  [1m[36m (0.1ms)[0m  [1mCREATE UNIQUE INDEX "index_oauth_applications_on_uid" ON "oauth_applications" ("uid")[0m
  [1m[35m (0.1ms)[0m  CREATE TABLE "oauth_access_grants" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "resource_owner_id" integer NOT NULL, "application_id" integer NOT NULL, "token" varchar NOT NULL, "expires_in" integer NOT NULL, "redirect_uri" text NOT NULL, "created_at" datetime NOT NULL, "revoked_at" datetime, "scopes" varchar) 
  [1m[36m (0.1ms)[0m  [1mCREATE UNIQUE INDEX "index_oauth_access_grants_on_token" ON "oauth_access_grants" ("token")[0m
  [1m[35m (0.1ms)[0m  CREATE TABLE "oauth_access_tokens" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "resource_owner_id" integer, "application_id" integer, "token" varchar NOT NULL, "refresh_token" varchar, "expires_in" integer, "revoked_at" datetime, "created_at" datetime NOT NULL, "scopes" varchar) 
  [1m[36m (0.1ms)[0m  [1mCREATE UNIQUE INDEX "index_oauth_access_tokens_on_token" ON "oauth_access_tokens" ("token")[0m
  [1m[35m (0.1ms)[0m              SELECT sql
            FROM sqlite_master
            WHERE name='index_oauth_access_tokens_on_token' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='index_oauth_access_tokens_on_token' AND type='index'

  [1m[36m (0.1ms)[0m  [1mCREATE  INDEX "index_oauth_access_tokens_on_resource_owner_id" ON "oauth_access_tokens" ("resource_owner_id")[0m
  [1m[35m (0.1ms)[0m              SELECT sql
            FROM sqlite_master
            WHERE name='index_oauth_access_tokens_on_resource_owner_id' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='index_oauth_access_tokens_on_resource_owner_id' AND type='index'

  [1m[36m (0.1ms)[0m  [1m            SELECT sql
            FROM sqlite_master
            WHERE name='index_oauth_access_tokens_on_token' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='index_oauth_access_tokens_on_token' AND type='index'
[0m
  [1m[35m (0.1ms)[0m  CREATE UNIQUE INDEX "index_oauth_access_tokens_on_refresh_token" ON "oauth_access_tokens" ("refresh_token")
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "schema_migrations" ("version") VALUES (?)[0m  [["version", "20150303054803"]]
  [1m[35m (0.0ms)[0m  commit transaction
  [1m[36mActiveRecord::SchemaMigration Load (0.1ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.1ms)[0m              SELECT sql
            FROM sqlite_master
            WHERE name='index_oauth_access_grants_on_token' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='index_oauth_access_grants_on_token' AND type='index'

  [1m[36m (0.1ms)[0m  [1m            SELECT sql
            FROM sqlite_master
            WHERE name='index_oauth_access_tokens_on_refresh_token' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='index_oauth_access_tokens_on_refresh_token' AND type='index'
[0m
  [1m[35m (0.1ms)[0m              SELECT sql
            FROM sqlite_master
            WHERE name='index_oauth_access_tokens_on_resource_owner_id' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='index_oauth_access_tokens_on_resource_owner_id' AND type='index'

  [1m[36m (0.1ms)[0m  [1m            SELECT sql
            FROM sqlite_master
            WHERE name='index_oauth_access_tokens_on_token' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='index_oauth_access_tokens_on_token' AND type='index'
[0m
  [1m[35m (0.1ms)[0m              SELECT sql
            FROM sqlite_master
            WHERE name='index_oauth_applications_on_uid' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='index_oauth_applications_on_uid' AND type='index'

  [1m[36m (0.3ms)[0m  [1mCREATE TABLE "oauth_access_grants" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "resource_owner_id" integer NOT NULL, "application_id" integer NOT NULL, "token" varchar NOT NULL, "expires_in" integer NOT NULL, "redirect_uri" text NOT NULL, "created_at" datetime NOT NULL, "revoked_at" datetime, "scopes" varchar) [0m
  [1m[35m (0.1ms)[0m  select sqlite_version(*)
  [1m[36m (0.1ms)[0m  [1mCREATE UNIQUE INDEX "index_oauth_access_grants_on_token" ON "oauth_access_grants" ("token")[0m
  [1m[35m (0.1ms)[0m  CREATE TABLE "oauth_access_tokens" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "resource_owner_id" integer, "application_id" integer, "token" varchar NOT NULL, "refresh_token" varchar, "expires_in" integer, "revoked_at" datetime, "created_at" datetime NOT NULL, "scopes" varchar) 
  [1m[36m (0.1ms)[0m  [1mCREATE UNIQUE INDEX "index_oauth_access_tokens_on_refresh_token" ON "oauth_access_tokens" ("refresh_token")[0m
  [1m[35m (0.1ms)[0m              SELECT sql
            FROM sqlite_master
            WHERE name='index_oauth_access_tokens_on_refresh_token' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='index_oauth_access_tokens_on_refresh_token' AND type='index'

  [1m[36m (0.1ms)[0m  [1mCREATE  INDEX "index_oauth_access_tokens_on_resource_owner_id" ON "oauth_access_tokens" ("resource_owner_id")[0m
  [1m[35m (0.1ms)[0m              SELECT sql
            FROM sqlite_master
            WHERE name='index_oauth_access_tokens_on_resource_owner_id' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='index_oauth_access_tokens_on_resource_owner_id' AND type='index'

  [1m[36m (0.1ms)[0m  [1m            SELECT sql
            FROM sqlite_master
            WHERE name='index_oauth_access_tokens_on_refresh_token' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='index_oauth_access_tokens_on_refresh_token' AND type='index'
[0m
  [1m[35m (0.1ms)[0m  CREATE UNIQUE INDEX "index_oauth_access_tokens_on_token" ON "oauth_access_tokens" ("token")
  [1m[36m (0.1ms)[0m  [1mCREATE TABLE "oauth_applications" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar NOT NULL, "uid" varchar NOT NULL, "secret" varchar NOT NULL, "redirect_uri" text NOT NULL, "scopes" varchar DEFAULT '' NOT NULL, "created_at" datetime, "updated_at" datetime) [0m
  [1m[35m (0.1ms)[0m  CREATE UNIQUE INDEX "index_oauth_applications_on_uid" ON "oauth_applications" ("uid")
  [1m[36m (0.1ms)[0m  [1mCREATE TABLE "schema_migrations" ("version" varchar NOT NULL) [0m
  [1m[35m (0.1ms)[0m  CREATE UNIQUE INDEX "unique_schema_migrations" ON "schema_migrations" ("version")
  [1m[36m (0.0ms)[0m  [1mSELECT version FROM "schema_migrations"[0m
  [1m[35m (0.1ms)[0m  INSERT INTO "schema_migrations" (version) VALUES ('20150303054803')
  [1m[36m (0.3ms)[0m  [1mCREATE TABLE "oauth_access_grants" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "resource_owner_id" integer NOT NULL, "application_id" integer NOT NULL, "token" varchar NOT NULL, "expires_in" integer NOT NULL, "redirect_uri" text NOT NULL, "created_at" datetime NOT NULL, "revoked_at" datetime, "scopes" varchar) [0m
  [1m[35m (0.1ms)[0m  select sqlite_version(*)
  [1m[36m (0.1ms)[0m  [1mCREATE UNIQUE INDEX "index_oauth_access_grants_on_token" ON "oauth_access_grants" ("token")[0m
  [1m[35m (0.1ms)[0m  CREATE TABLE "oauth_access_tokens" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "resource_owner_id" integer, "application_id" integer, "token" varchar NOT NULL, "refresh_token" varchar, "expires_in" integer, "revoked_at" datetime, "created_at" datetime NOT NULL, "scopes" varchar) 
  [1m[36m (0.1ms)[0m  [1mCREATE UNIQUE INDEX "index_oauth_access_tokens_on_refresh_token" ON "oauth_access_tokens" ("refresh_token")[0m
  [1m[35m (0.1ms)[0m              SELECT sql
            FROM sqlite_master
            WHERE name='index_oauth_access_tokens_on_refresh_token' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='index_oauth_access_tokens_on_refresh_token' AND type='index'

  [1m[36m (0.1ms)[0m  [1mCREATE  INDEX "index_oauth_access_tokens_on_resource_owner_id" ON "oauth_access_tokens" ("resource_owner_id")[0m
  [1m[35m (0.1ms)[0m              SELECT sql
            FROM sqlite_master
            WHERE name='index_oauth_access_tokens_on_resource_owner_id' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='index_oauth_access_tokens_on_resource_owner_id' AND type='index'

  [1m[36m (0.1ms)[0m  [1m            SELECT sql
            FROM sqlite_master
            WHERE name='index_oauth_access_tokens_on_refresh_token' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='index_oauth_access_tokens_on_refresh_token' AND type='index'
[0m
  [1m[35m (0.1ms)[0m  CREATE UNIQUE INDEX "index_oauth_access_tokens_on_token" ON "oauth_access_tokens" ("token")
  [1m[36m (0.1ms)[0m  [1mCREATE TABLE "oauth_applications" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar NOT NULL, "uid" varchar NOT NULL, "secret" varchar NOT NULL, "redirect_uri" text NOT NULL, "scopes" varchar DEFAULT '' NOT NULL, "created_at" datetime, "updated_at" datetime) [0m
  [1m[35m (0.1ms)[0m  CREATE UNIQUE INDEX "index_oauth_applications_on_uid" ON "oauth_applications" ("uid")
  [1m[36m (0.1ms)[0m  [1mCREATE TABLE "schema_migrations" ("version" varchar NOT NULL) [0m
  [1m[35m (0.1ms)[0m  CREATE UNIQUE INDEX "unique_schema_migrations" ON "schema_migrations" ("version")
  [1m[36m (0.0ms)[0m  [1mSELECT version FROM "schema_migrations"[0m
  [1m[35m (0.1ms)[0m  INSERT INTO "schema_migrations" (version) VALUES ('20150303054803')
  [1m[36m (0.3ms)[0m  [1mCREATE TABLE "oauth_access_grants" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "resource_owner_id" integer NOT NULL, "application_id" integer NOT NULL, "token" varchar NOT NULL, "expires_in" integer NOT NULL, "redirect_uri" text NOT NULL, "created_at" datetime NOT NULL, "revoked_at" datetime, "scopes" varchar) [0m
  [1m[35m (0.1ms)[0m  select sqlite_version(*)
  [1m[36m (0.1ms)[0m  [1mCREATE UNIQUE INDEX "index_oauth_access_grants_on_token" ON "oauth_access_grants" ("token")[0m
  [1m[35m (0.2ms)[0m  CREATE TABLE "oauth_access_tokens" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "resource_owner_id" integer, "application_id" integer, "token" varchar NOT NULL, "refresh_token" varchar, "expires_in" integer, "revoked_at" datetime, "created_at" datetime NOT NULL, "scopes" varchar) 
  [1m[36m (0.1ms)[0m  [1mCREATE UNIQUE INDEX "index_oauth_access_tokens_on_refresh_token" ON "oauth_access_tokens" ("refresh_token")[0m
  [1m[35m (0.1ms)[0m              SELECT sql
            FROM sqlite_master
            WHERE name='index_oauth_access_tokens_on_refresh_token' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='index_oauth_access_tokens_on_refresh_token' AND type='index'

  [1m[36m (0.1ms)[0m  [1mCREATE  INDEX "index_oauth_access_tokens_on_resource_owner_id" ON "oauth_access_tokens" ("resource_owner_id")[0m
  [1m[35m (0.1ms)[0m              SELECT sql
            FROM sqlite_master
            WHERE name='index_oauth_access_tokens_on_resource_owner_id' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='index_oauth_access_tokens_on_resource_owner_id' AND type='index'

  [1m[36m (0.1ms)[0m  [1m            SELECT sql
            FROM sqlite_master
            WHERE name='index_oauth_access_tokens_on_refresh_token' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='index_oauth_access_tokens_on_refresh_token' AND type='index'
[0m
  [1m[35m (0.1ms)[0m  CREATE UNIQUE INDEX "index_oauth_access_tokens_on_token" ON "oauth_access_tokens" ("token")
  [1m[36m (0.1ms)[0m  [1mCREATE TABLE "oauth_applications" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar NOT NULL, "uid" varchar NOT NULL, "secret" varchar NOT NULL, "redirect_uri" text NOT NULL, "scopes" varchar DEFAULT '' NOT NULL, "created_at" datetime, "updated_at" datetime) [0m
  [1m[35m (0.1ms)[0m  CREATE UNIQUE INDEX "index_oauth_applications_on_uid" ON "oauth_applications" ("uid")
  [1m[36m (0.1ms)[0m  [1mCREATE TABLE "schema_migrations" ("version" varchar NOT NULL) [0m
  [1m[35m (0.1ms)[0m  CREATE UNIQUE INDEX "unique_schema_migrations" ON "schema_migrations" ("version")
  [1m[36m (0.0ms)[0m  [1mSELECT version FROM "schema_migrations"[0m
  [1m[35m (0.1ms)[0m  INSERT INTO "schema_migrations" (version) VALUES ('20150303054803')
  [1m[36m (0.3ms)[0m  [1mCREATE TABLE "oauth_access_grants" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "resource_owner_id" integer NOT NULL, "application_id" integer NOT NULL, "token" varchar NOT NULL, "expires_in" integer NOT NULL, "redirect_uri" text NOT NULL, "created_at" datetime NOT NULL, "revoked_at" datetime, "scopes" varchar) [0m
  [1m[35m (0.1ms)[0m  select sqlite_version(*)
  [1m[36m (0.1ms)[0m  [1mCREATE UNIQUE INDEX "index_oauth_access_grants_on_token" ON "oauth_access_grants" ("token")[0m
  [1m[35m (0.1ms)[0m  CREATE TABLE "oauth_access_tokens" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "resource_owner_id" integer, "application_id" integer, "token" varchar NOT NULL, "refresh_token" varchar, "expires_in" integer, "revoked_at" datetime, "created_at" datetime NOT NULL, "scopes" varchar) 
  [1m[36m (0.1ms)[0m  [1mCREATE UNIQUE INDEX "index_oauth_access_tokens_on_refresh_token" ON "oauth_access_tokens" ("refresh_token")[0m
  [1m[35m (0.1ms)[0m              SELECT sql
            FROM sqlite_master
            WHERE name='index_oauth_access_tokens_on_refresh_token' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='index_oauth_access_tokens_on_refresh_token' AND type='index'

  [1m[36m (0.1ms)[0m  [1mCREATE  INDEX "index_oauth_access_tokens_on_resource_owner_id" ON "oauth_access_tokens" ("resource_owner_id")[0m
  [1m[35m (0.1ms)[0m              SELECT sql
            FROM sqlite_master
            WHERE name='index_oauth_access_tokens_on_resource_owner_id' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='index_oauth_access_tokens_on_resource_owner_id' AND type='index'

  [1m[36m (0.1ms)[0m  [1m            SELECT sql
            FROM sqlite_master
            WHERE name='index_oauth_access_tokens_on_refresh_token' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='index_oauth_access_tokens_on_refresh_token' AND type='index'
[0m
  [1m[35m (0.1ms)[0m  CREATE UNIQUE INDEX "index_oauth_access_tokens_on_token" ON "oauth_access_tokens" ("token")
  [1m[36m (0.1ms)[0m  [1mCREATE TABLE "oauth_applications" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar NOT NULL, "uid" varchar NOT NULL, "secret" varchar NOT NULL, "redirect_uri" text NOT NULL, "scopes" varchar DEFAULT '' NOT NULL, "created_at" datetime, "updated_at" datetime) [0m
  [1m[35m (0.1ms)[0m  CREATE UNIQUE INDEX "index_oauth_applications_on_uid" ON "oauth_applications" ("uid")
  [1m[36m (0.1ms)[0m  [1mCREATE TABLE "schema_migrations" ("version" varchar NOT NULL) [0m
  [1m[35m (0.1ms)[0m  CREATE UNIQUE INDEX "unique_schema_migrations" ON "schema_migrations" ("version")
  [1m[36m (0.0ms)[0m  [1mSELECT version FROM "schema_migrations"[0m
  [1m[35m (0.1ms)[0m  INSERT INTO "schema_migrations" (version) VALUES ('20150303054803')
Started GET "/oauth/authorize?client_id=087e7eba0ab22099a6f8864aefd2472ffba2376ab2ebe090d9917c5d63b9ac45&redirect_uri=https%3A%2F%2Falpha.example.com%2Fauth%2Fgate%2Fcallback&response_type=code&state=some_random_string" for 127.0.0.1 at 2015-03-03 07:43:31 +0100
Processing by Doorkeeper::AuthorizationsController#new as HTML
  Parameters: {"client_id"=>"087e7eba0ab22099a6f8864aefd2472ffba2376ab2ebe090d9917c5d63b9ac45", "redirect_uri"=>"https://alpha.example.com/auth/gate/callback", "response_type"=>"code", "state"=>"some_random_string"}
Completed 500 Internal Server Error in 0ms
Started GET "/oauth/authorize?client_id=087e7eba0ab22099a6f8864aefd2472ffba2376ab2ebe090d9917c5d63b9ac45&redirect_uri=https%3A%2F%2Falpha.example.com%2Fauth%2Fgate%2Fcallback&response_type=code&state=some_random_string" for 127.0.0.1 at 2015-03-03 07:43:34 +0100
Processing by Doorkeeper::AuthorizationsController#new as HTML
  Parameters: {"client_id"=>"087e7eba0ab22099a6f8864aefd2472ffba2376ab2ebe090d9917c5d63b9ac45", "redirect_uri"=>"https://alpha.example.com/auth/gate/callback", "response_type"=>"code", "state"=>"some_random_string"}
Completed 500 Internal Server Error in 0ms
Started GET "/oauth/authorize?client_id=087e7eba0ab22099a6f8864aefd2472ffba2376ab2ebe090d9917c5d63b9ac45&redirect_uri=https%3A%2F%2Falpha.example.com%2Fauth%2Fgate%2Fcallback&response_type=code&state=some_random_string" for 127.0.0.1 at 2015-03-03 07:55:02 +0100
Processing by Doorkeeper::AuthorizationsController#new as HTML
  Parameters: {"client_id"=>"087e7eba0ab22099a6f8864aefd2472ffba2376ab2ebe090d9917c5d63b9ac45", "redirect_uri"=>"https://alpha.example.com/auth/gate/callback", "response_type"=>"code", "state"=>"some_random_string"}
Completed 500 Internal Server Error in 0ms
Started GET "/oauth/authorize?client_id=087e7eba0ab22099a6f8864aefd2472ffba2376ab2ebe090d9917c5d63b9ac45&redirect_uri=https%3A%2F%2Falpha.example.com%2Fauth%2Fgate%2Fcallback&response_type=code&state=some_random_string" for 127.0.0.1 at 2015-03-03 07:55:21 +0100
Processing by Doorkeeper::AuthorizationsController#new as HTML
  Parameters: {"client_id"=>"087e7eba0ab22099a6f8864aefd2472ffba2376ab2ebe090d9917c5d63b9ac45", "redirect_uri"=>"https://alpha.example.com/auth/gate/callback", "response_type"=>"code", "state"=>"some_random_string"}
Completed 500 Internal Server Error in 8ms
  [1m[36m (0.3ms)[0m  [1mCREATE TABLE "oauth_access_grants" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "resource_owner_id" integer NOT NULL, "application_id" integer NOT NULL, "token" varchar NOT NULL, "expires_in" integer NOT NULL, "redirect_uri" text NOT NULL, "created_at" datetime NOT NULL, "revoked_at" datetime, "scopes" varchar) [0m
  [1m[35m (0.0ms)[0m  select sqlite_version(*)
  [1m[36m (0.1ms)[0m  [1mCREATE UNIQUE INDEX "index_oauth_access_grants_on_token" ON "oauth_access_grants" ("token")[0m
  [1m[35m (0.1ms)[0m  CREATE TABLE "oauth_access_tokens" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "resource_owner_id" integer, "application_id" integer, "token" varchar NOT NULL, "refresh_token" varchar, "expires_in" integer, "revoked_at" datetime, "created_at" datetime NOT NULL, "scopes" varchar) 
  [1m[36m (0.1ms)[0m  [1mCREATE UNIQUE INDEX "index_oauth_access_tokens_on_refresh_token" ON "oauth_access_tokens" ("refresh_token")[0m
  [1m[35m (0.1ms)[0m              SELECT sql
            FROM sqlite_master
            WHERE name='index_oauth_access_tokens_on_refresh_token' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='index_oauth_access_tokens_on_refresh_token' AND type='index'

  [1m[36m (0.1ms)[0m  [1mCREATE  INDEX "index_oauth_access_tokens_on_resource_owner_id" ON "oauth_access_tokens" ("resource_owner_id")[0m
  [1m[35m (0.1ms)[0m              SELECT sql
            FROM sqlite_master
            WHERE name='index_oauth_access_tokens_on_resource_owner_id' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='index_oauth_access_tokens_on_resource_owner_id' AND type='index'

  [1m[36m (0.1ms)[0m  [1m            SELECT sql
            FROM sqlite_master
            WHERE name='index_oauth_access_tokens_on_refresh_token' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='index_oauth_access_tokens_on_refresh_token' AND type='index'
[0m
  [1m[35m (0.1ms)[0m  CREATE UNIQUE INDEX "index_oauth_access_tokens_on_token" ON "oauth_access_tokens" ("token")
  [1m[36m (0.1ms)[0m  [1mCREATE TABLE "oauth_applications" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar NOT NULL, "uid" varchar NOT NULL, "secret" varchar NOT NULL, "redirect_uri" text NOT NULL, "scopes" varchar DEFAULT '' NOT NULL, "created_at" datetime, "updated_at" datetime) [0m
  [1m[35m (0.1ms)[0m  CREATE UNIQUE INDEX "index_oauth_applications_on_uid" ON "oauth_applications" ("uid")
  [1m[36m (0.1ms)[0m  [1mCREATE TABLE "schema_migrations" ("version" varchar NOT NULL) [0m
  [1m[35m (0.1ms)[0m  CREATE UNIQUE INDEX "unique_schema_migrations" ON "schema_migrations" ("version")
  [1m[36m (0.0ms)[0m  [1mSELECT version FROM "schema_migrations"[0m
  [1m[35m (0.1ms)[0m  INSERT INTO "schema_migrations" (version) VALUES ('20150303054803')
Started GET "/oauth/authorize?client_id=087e7eba0ab22099a6f8864aefd2472ffba2376ab2ebe090d9917c5d63b9ac45&redirect_uri=https%3A%2F%2Falpha.example.com%2Fauth%2Fgate%2Fcallback&response_type=code&state=some_random_string" for 127.0.0.1 at 2015-03-03 07:55:41 +0100
Processing by Doorkeeper::AuthorizationsController#new as HTML
  Parameters: {"client_id"=>"087e7eba0ab22099a6f8864aefd2472ffba2376ab2ebe090d9917c5d63b9ac45", "redirect_uri"=>"https://alpha.example.com/auth/gate/callback", "response_type"=>"code", "state"=>"some_random_string"}
Completed 500 Internal Server Error in 4ms
  [1m[36m (0.3ms)[0m  [1mCREATE TABLE "oauth_access_grants" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "resource_owner_id" integer NOT NULL, "application_id" integer NOT NULL, "token" varchar NOT NULL, "expires_in" integer NOT NULL, "redirect_uri" text NOT NULL, "created_at" datetime NOT NULL, "revoked_at" datetime, "scopes" varchar) [0m
  [1m[35m (0.3ms)[0m  select sqlite_version(*)
  [1m[36m (0.2ms)[0m  [1mCREATE UNIQUE INDEX "index_oauth_access_grants_on_token" ON "oauth_access_grants" ("token")[0m
  [1m[35m (0.2ms)[0m  CREATE TABLE "oauth_access_tokens" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "resource_owner_id" integer, "application_id" integer, "token" varchar NOT NULL, "refresh_token" varchar, "expires_in" integer, "revoked_at" datetime, "created_at" datetime NOT NULL, "scopes" varchar) 
  [1m[36m (0.2ms)[0m  [1mCREATE UNIQUE INDEX "index_oauth_access_tokens_on_refresh_token" ON "oauth_access_tokens" ("refresh_token")[0m
  [1m[35m (0.1ms)[0m              SELECT sql
            FROM sqlite_master
            WHERE name='index_oauth_access_tokens_on_refresh_token' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='index_oauth_access_tokens_on_refresh_token' AND type='index'

  [1m[36m (0.1ms)[0m  [1mCREATE  INDEX "index_oauth_access_tokens_on_resource_owner_id" ON "oauth_access_tokens" ("resource_owner_id")[0m
  [1m[35m (0.1ms)[0m              SELECT sql
            FROM sqlite_master
            WHERE name='index_oauth_access_tokens_on_resource_owner_id' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='index_oauth_access_tokens_on_resource_owner_id' AND type='index'

  [1m[36m (0.1ms)[0m  [1m            SELECT sql
            FROM sqlite_master
            WHERE name='index_oauth_access_tokens_on_refresh_token' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='index_oauth_access_tokens_on_refresh_token' AND type='index'
[0m
  [1m[35m (0.1ms)[0m  CREATE UNIQUE INDEX "index_oauth_access_tokens_on_token" ON "oauth_access_tokens" ("token")
  [1m[36m (0.1ms)[0m  [1mCREATE TABLE "oauth_applications" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar NOT NULL, "uid" varchar NOT NULL, "secret" varchar NOT NULL, "redirect_uri" text NOT NULL, "scopes" varchar DEFAULT '' NOT NULL, "created_at" datetime, "updated_at" datetime) [0m
  [1m[35m (0.1ms)[0m  CREATE UNIQUE INDEX "index_oauth_applications_on_uid" ON "oauth_applications" ("uid")
  [1m[36m (0.1ms)[0m  [1mCREATE TABLE "schema_migrations" ("version" varchar NOT NULL) [0m
  [1m[35m (0.1ms)[0m  CREATE UNIQUE INDEX "unique_schema_migrations" ON "schema_migrations" ("version")
  [1m[36m (0.1ms)[0m  [1mSELECT version FROM "schema_migrations"[0m
  [1m[35m (0.1ms)[0m  INSERT INTO "schema_migrations" (version) VALUES ('20150303054803')
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35mDoorkeeper::Application Exists (0.1ms)[0m  SELECT  1 AS one FROM "oauth_applications" WHERE "oauth_applications"."uid" = '087e7eba0ab22099a6f8864aefd2472ffba2376ab2ebe090d9917c5d63b9ac45' LIMIT 1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "oauth_applications" ("name", "redirect_uri", "uid", "secret", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["name", "Alpha"], ["redirect_uri", "https://alpha.example.com/auth/gate/callback"], ["uid", "087e7eba0ab22099a6f8864aefd2472ffba2376ab2ebe090d9917c5d63b9ac45"], ["secret", "1ce7d7ce7fbd76abafdfa0d0b33ad77e454ecd05f4ed613e5efd12f7fbf89b8a"], ["created_at", "2015-03-03 07:11:33.435847"], ["updated_at", "2015-03-03 07:11:33.435847"]]
  [1m[35m (0.0ms)[0m  commit transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35mDoorkeeper::Application Exists (0.1ms)[0m  SELECT  1 AS one FROM "oauth_applications" WHERE "oauth_applications"."uid" = 'afb5b8ff6d708e36c315ede59418cedf57a1f4c8807d9028ac450ddb131cefcd' LIMIT 1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "oauth_applications" ("name", "redirect_uri", "uid", "secret", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["name", "Beta"], ["redirect_uri", "https://beta.example.com/cms/auth/gate/callback"], ["uid", "afb5b8ff6d708e36c315ede59418cedf57a1f4c8807d9028ac450ddb131cefcd"], ["secret", "431ed0d33aad86dc10790547243662616444a106d4817069a4577a4ee875ce59"], ["created_at", "2015-03-03 07:11:33.438269"], ["updated_at", "2015-03-03 07:11:33.438269"]]
  [1m[35m (0.0ms)[0m  commit transaction
Started GET "/oauth/authorize?client_id=087e7eba0ab22099a6f8864aefd2472ffba2376ab2ebe090d9917c5d63b9ac45&redirect_uri=https%3A%2F%2Falpha.example.com%2Fauth%2Fgate%2Fcallback&response_type=code&state=some_random_string" for 127.0.0.1 at 2015-03-03 08:11:33 +0100
Processing by Doorkeeper::AuthorizationsController#new as HTML
  Parameters: {"client_id"=>"087e7eba0ab22099a6f8864aefd2472ffba2376ab2ebe090d9917c5d63b9ac45", "redirect_uri"=>"https://alpha.example.com/auth/gate/callback", "response_type"=>"code", "state"=>"some_random_string"}
  [1m[36mDoorkeeper::Application Load (0.1ms)[0m  [1mSELECT  "oauth_applications".* FROM "oauth_applications" WHERE "oauth_applications"."uid" = ? LIMIT 1[0m  [["uid", "087e7eba0ab22099a6f8864aefd2472ffba2376ab2ebe090d9917c5d63b9ac45"]]
Completed 500 Internal Server Error in 6ms
  [1m[36m (0.3ms)[0m  [1mCREATE TABLE "oauth_access_grants" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "resource_owner_id" integer NOT NULL, "application_id" integer NOT NULL, "token" varchar NOT NULL, "expires_in" integer NOT NULL, "redirect_uri" text NOT NULL, "created_at" datetime NOT NULL, "revoked_at" datetime, "scopes" varchar) [0m
  [1m[35m (0.1ms)[0m  select sqlite_version(*)
  [1m[36m (0.1ms)[0m  [1mCREATE UNIQUE INDEX "index_oauth_access_grants_on_token" ON "oauth_access_grants" ("token")[0m
  [1m[35m (0.1ms)[0m  CREATE TABLE "oauth_access_tokens" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "resource_owner_id" integer, "application_id" integer, "token" varchar NOT NULL, "refresh_token" varchar, "expires_in" integer, "revoked_at" datetime, "created_at" datetime NOT NULL, "scopes" varchar) 
  [1m[36m (0.1ms)[0m  [1mCREATE UNIQUE INDEX "index_oauth_access_tokens_on_refresh_token" ON "oauth_access_tokens" ("refresh_token")[0m
  [1m[35m (0.1ms)[0m              SELECT sql
            FROM sqlite_master
            WHERE name='index_oauth_access_tokens_on_refresh_token' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='index_oauth_access_tokens_on_refresh_token' AND type='index'

  [1m[36m (0.1ms)[0m  [1mCREATE  INDEX "index_oauth_access_tokens_on_resource_owner_id" ON "oauth_access_tokens" ("resource_owner_id")[0m
  [1m[35m (0.1ms)[0m              SELECT sql
            FROM sqlite_master
            WHERE name='index_oauth_access_tokens_on_resource_owner_id' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='index_oauth_access_tokens_on_resource_owner_id' AND type='index'

  [1m[36m (0.1ms)[0m  [1m            SELECT sql
            FROM sqlite_master
            WHERE name='index_oauth_access_tokens_on_refresh_token' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='index_oauth_access_tokens_on_refresh_token' AND type='index'
[0m
  [1m[35m (0.1ms)[0m  CREATE UNIQUE INDEX "index_oauth_access_tokens_on_token" ON "oauth_access_tokens" ("token")
  [1m[36m (0.2ms)[0m  [1mCREATE TABLE "oauth_applications" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar NOT NULL, "uid" varchar NOT NULL, "secret" varchar NOT NULL, "redirect_uri" text NOT NULL, "scopes" varchar DEFAULT '' NOT NULL, "created_at" datetime, "updated_at" datetime) [0m
  [1m[35m (0.2ms)[0m  CREATE UNIQUE INDEX "index_oauth_applications_on_uid" ON "oauth_applications" ("uid")
  [1m[36m (0.1ms)[0m  [1mCREATE TABLE "schema_migrations" ("version" varchar NOT NULL) [0m
  [1m[35m (0.1ms)[0m  CREATE UNIQUE INDEX "unique_schema_migrations" ON "schema_migrations" ("version")
  [1m[36m (0.0ms)[0m  [1mSELECT version FROM "schema_migrations"[0m
  [1m[35m (0.1ms)[0m  INSERT INTO "schema_migrations" (version) VALUES ('20150303054803')
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35mDoorkeeper::Application Exists (0.1ms)[0m  SELECT  1 AS one FROM "oauth_applications" WHERE "oauth_applications"."uid" = '087e7eba0ab22099a6f8864aefd2472ffba2376ab2ebe090d9917c5d63b9ac45' LIMIT 1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "oauth_applications" ("name", "redirect_uri", "uid", "secret", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["name", "Alpha"], ["redirect_uri", "https://alpha.example.com/auth/gate/callback"], ["uid", "087e7eba0ab22099a6f8864aefd2472ffba2376ab2ebe090d9917c5d63b9ac45"], ["secret", "1ce7d7ce7fbd76abafdfa0d0b33ad77e454ecd05f4ed613e5efd12f7fbf89b8a"], ["created_at", "2015-03-03 07:12:08.065912"], ["updated_at", "2015-03-03 07:12:08.065912"]]
  [1m[35m (0.0ms)[0m  commit transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35mDoorkeeper::Application Exists (0.1ms)[0m  SELECT  1 AS one FROM "oauth_applications" WHERE "oauth_applications"."uid" = 'afb5b8ff6d708e36c315ede59418cedf57a1f4c8807d9028ac450ddb131cefcd' LIMIT 1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "oauth_applications" ("name", "redirect_uri", "uid", "secret", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["name", "Beta"], ["redirect_uri", "https://beta.example.com/cms/auth/gate/callback"], ["uid", "afb5b8ff6d708e36c315ede59418cedf57a1f4c8807d9028ac450ddb131cefcd"], ["secret", "431ed0d33aad86dc10790547243662616444a106d4817069a4577a4ee875ce59"], ["created_at", "2015-03-03 07:12:08.068359"], ["updated_at", "2015-03-03 07:12:08.068359"]]
  [1m[35m (0.0ms)[0m  commit transaction
Started GET "/oauth/authorize?client_id=087e7eba0ab22099a6f8864aefd2472ffba2376ab2ebe090d9917c5d63b9ac45&redirect_uri=https%3A%2F%2Falpha.example.com%2Fauth%2Fgate%2Fcallback&response_type=code&state=some_random_string" for 127.0.0.1 at 2015-03-03 08:12:08 +0100
Processing by Doorkeeper::AuthorizationsController#new as HTML
  Parameters: {"client_id"=>"087e7eba0ab22099a6f8864aefd2472ffba2376ab2ebe090d9917c5d63b9ac45", "redirect_uri"=>"https://alpha.example.com/auth/gate/callback", "response_type"=>"code", "state"=>"some_random_string"}
  [1m[36mDoorkeeper::Application Load (0.1ms)[0m  [1mSELECT  "oauth_applications".* FROM "oauth_applications" WHERE "oauth_applications"."uid" = ? LIMIT 1[0m  [["uid", "087e7eba0ab22099a6f8864aefd2472ffba2376ab2ebe090d9917c5d63b9ac45"]]
Completed 500 Internal Server Error in 9ms
  [1m[36m (0.3ms)[0m  [1mCREATE TABLE "oauth_access_grants" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "resource_owner_id" integer NOT NULL, "application_id" integer NOT NULL, "token" varchar NOT NULL, "expires_in" integer NOT NULL, "redirect_uri" text NOT NULL, "created_at" datetime NOT NULL, "revoked_at" datetime, "scopes" varchar) [0m
  [1m[35m (0.1ms)[0m  select sqlite_version(*)
  [1m[36m (0.2ms)[0m  [1mCREATE UNIQUE INDEX "index_oauth_access_grants_on_token" ON "oauth_access_grants" ("token")[0m
  [1m[35m (0.2ms)[0m  CREATE TABLE "oauth_access_tokens" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "resource_owner_id" integer, "application_id" integer, "token" varchar NOT NULL, "refresh_token" varchar, "expires_in" integer, "revoked_at" datetime, "created_at" datetime NOT NULL, "scopes" varchar) 
  [1m[36m (0.1ms)[0m  [1mCREATE UNIQUE INDEX "index_oauth_access_tokens_on_refresh_token" ON "oauth_access_tokens" ("refresh_token")[0m
  [1m[35m (0.1ms)[0m              SELECT sql
            FROM sqlite_master
            WHERE name='index_oauth_access_tokens_on_refresh_token' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='index_oauth_access_tokens_on_refresh_token' AND type='index'

  [1m[36m (0.1ms)[0m  [1mCREATE  INDEX "index_oauth_access_tokens_on_resource_owner_id" ON "oauth_access_tokens" ("resource_owner_id")[0m
  [1m[35m (0.1ms)[0m              SELECT sql
            FROM sqlite_master
            WHERE name='index_oauth_access_tokens_on_resource_owner_id' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='index_oauth_access_tokens_on_resource_owner_id' AND type='index'

  [1m[36m (0.1ms)[0m  [1m            SELECT sql
            FROM sqlite_master
            WHERE name='index_oauth_access_tokens_on_refresh_token' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='index_oauth_access_tokens_on_refresh_token' AND type='index'
[0m
  [1m[35m (0.1ms)[0m  CREATE UNIQUE INDEX "index_oauth_access_tokens_on_token" ON "oauth_access_tokens" ("token")
  [1m[36m (0.2ms)[0m  [1mCREATE TABLE "oauth_applications" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar NOT NULL, "uid" varchar NOT NULL, "secret" varchar NOT NULL, "redirect_uri" text NOT NULL, "scopes" varchar DEFAULT '' NOT NULL, "created_at" datetime, "updated_at" datetime) [0m
  [1m[35m (0.1ms)[0m  CREATE UNIQUE INDEX "index_oauth_applications_on_uid" ON "oauth_applications" ("uid")
  [1m[36m (0.1ms)[0m  [1mCREATE TABLE "schema_migrations" ("version" varchar NOT NULL) [0m
  [1m[35m (0.1ms)[0m  CREATE UNIQUE INDEX "unique_schema_migrations" ON "schema_migrations" ("version")
  [1m[36m (0.0ms)[0m  [1mSELECT version FROM "schema_migrations"[0m
  [1m[35m (0.1ms)[0m  INSERT INTO "schema_migrations" (version) VALUES ('20150303054803')
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35mDoorkeeper::Application Exists (0.1ms)[0m  SELECT  1 AS one FROM "oauth_applications" WHERE "oauth_applications"."uid" = '087e7eba0ab22099a6f8864aefd2472ffba2376ab2ebe090d9917c5d63b9ac45' LIMIT 1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "oauth_applications" ("name", "redirect_uri", "uid", "secret", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["name", "Alpha"], ["redirect_uri", "https://alpha.example.com/auth/gate/callback"], ["uid", "087e7eba0ab22099a6f8864aefd2472ffba2376ab2ebe090d9917c5d63b9ac45"], ["secret", "1ce7d7ce7fbd76abafdfa0d0b33ad77e454ecd05f4ed613e5efd12f7fbf89b8a"], ["created_at", "2015-03-03 07:12:52.315791"], ["updated_at", "2015-03-03 07:12:52.315791"]]
  [1m[35m (0.0ms)[0m  commit transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35mDoorkeeper::Application Exists (0.1ms)[0m  SELECT  1 AS one FROM "oauth_applications" WHERE "oauth_applications"."uid" = 'afb5b8ff6d708e36c315ede59418cedf57a1f4c8807d9028ac450ddb131cefcd' LIMIT 1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "oauth_applications" ("name", "redirect_uri", "uid", "secret", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["name", "Beta"], ["redirect_uri", "https://beta.example.com/cms/auth/gate/callback"], ["uid", "afb5b8ff6d708e36c315ede59418cedf57a1f4c8807d9028ac450ddb131cefcd"], ["secret", "431ed0d33aad86dc10790547243662616444a106d4817069a4577a4ee875ce59"], ["created_at", "2015-03-03 07:12:52.318233"], ["updated_at", "2015-03-03 07:12:52.318233"]]
  [1m[35m (0.0ms)[0m  commit transaction
Started GET "/oauth/authorize?client_id=087e7eba0ab22099a6f8864aefd2472ffba2376ab2ebe090d9917c5d63b9ac45&redirect_uri=https%3A%2F%2Falpha.example.com%2Fauth%2Fgate%2Fcallback&response_type=code&state=some_random_string" for 127.0.0.1 at 2015-03-03 08:12:52 +0100
Processing by Doorkeeper::AuthorizationsController#new as HTML
  Parameters: {"client_id"=>"087e7eba0ab22099a6f8864aefd2472ffba2376ab2ebe090d9917c5d63b9ac45", "redirect_uri"=>"https://alpha.example.com/auth/gate/callback", "response_type"=>"code", "state"=>"some_random_string"}
  [1m[36mDoorkeeper::Application Load (0.1ms)[0m  [1mSELECT  "oauth_applications".* FROM "oauth_applications" WHERE "oauth_applications"."uid" = ? LIMIT 1[0m  [["uid", "087e7eba0ab22099a6f8864aefd2472ffba2376ab2ebe090d9917c5d63b9ac45"]]
Completed 500 Internal Server Error in 6ms
  [1m[36m (0.3ms)[0m  [1mCREATE TABLE "oauth_access_grants" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "resource_owner_id" integer NOT NULL, "application_id" integer NOT NULL, "token" varchar NOT NULL, "expires_in" integer NOT NULL, "redirect_uri" text NOT NULL, "created_at" datetime NOT NULL, "revoked_at" datetime, "scopes" varchar) [0m
  [1m[35m (0.0ms)[0m  select sqlite_version(*)
  [1m[36m (0.1ms)[0m  [1mCREATE UNIQUE INDEX "index_oauth_access_grants_on_token" ON "oauth_access_grants" ("token")[0m
  [1m[35m (0.1ms)[0m  CREATE TABLE "oauth_access_tokens" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "resource_owner_id" integer, "application_id" integer, "token" varchar NOT NULL, "refresh_token" varchar, "expires_in" integer, "revoked_at" datetime, "created_at" datetime NOT NULL, "scopes" varchar) 
  [1m[36m (0.1ms)[0m  [1mCREATE UNIQUE INDEX "index_oauth_access_tokens_on_refresh_token" ON "oauth_access_tokens" ("refresh_token")[0m
  [1m[35m (0.1ms)[0m              SELECT sql
            FROM sqlite_master
            WHERE name='index_oauth_access_tokens_on_refresh_token' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='index_oauth_access_tokens_on_refresh_token' AND type='index'

  [1m[36m (0.1ms)[0m  [1mCREATE  INDEX "index_oauth_access_tokens_on_resource_owner_id" ON "oauth_access_tokens" ("resource_owner_id")[0m
  [1m[35m (0.1ms)[0m              SELECT sql
            FROM sqlite_master
            WHERE name='index_oauth_access_tokens_on_resource_owner_id' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='index_oauth_access_tokens_on_resource_owner_id' AND type='index'

  [1m[36m (0.1ms)[0m  [1m            SELECT sql
            FROM sqlite_master
            WHERE name='index_oauth_access_tokens_on_refresh_token' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='index_oauth_access_tokens_on_refresh_token' AND type='index'
[0m
  [1m[35m (0.2ms)[0m  CREATE UNIQUE INDEX "index_oauth_access_tokens_on_token" ON "oauth_access_tokens" ("token")
  [1m[36m (0.2ms)[0m  [1mCREATE TABLE "oauth_applications" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar NOT NULL, "uid" varchar NOT NULL, "secret" varchar NOT NULL, "redirect_uri" text NOT NULL, "scopes" varchar DEFAULT '' NOT NULL, "created_at" datetime, "updated_at" datetime) [0m
  [1m[35m (0.1ms)[0m  CREATE UNIQUE INDEX "index_oauth_applications_on_uid" ON "oauth_applications" ("uid")
  [1m[36m (0.1ms)[0m  [1mCREATE TABLE "schema_migrations" ("version" varchar NOT NULL) [0m
  [1m[35m (0.1ms)[0m  CREATE UNIQUE INDEX "unique_schema_migrations" ON "schema_migrations" ("version")
  [1m[36m (0.0ms)[0m  [1mSELECT version FROM "schema_migrations"[0m
  [1m[35m (0.1ms)[0m  INSERT INTO "schema_migrations" (version) VALUES ('20150303054803')
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35mDoorkeeper::Application Exists (0.1ms)[0m  SELECT  1 AS one FROM "oauth_applications" WHERE "oauth_applications"."uid" = '087e7eba0ab22099a6f8864aefd2472ffba2376ab2ebe090d9917c5d63b9ac45' LIMIT 1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "oauth_applications" ("name", "redirect_uri", "uid", "secret", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["name", "Alpha"], ["redirect_uri", "https://alpha.example.com/auth/gate/callback"], ["uid", "087e7eba0ab22099a6f8864aefd2472ffba2376ab2ebe090d9917c5d63b9ac45"], ["secret", "1ce7d7ce7fbd76abafdfa0d0b33ad77e454ecd05f4ed613e5efd12f7fbf89b8a"], ["created_at", "2015-03-03 07:13:26.191247"], ["updated_at", "2015-03-03 07:13:26.191247"]]
  [1m[35m (0.0ms)[0m  commit transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35mDoorkeeper::Application Exists (0.1ms)[0m  SELECT  1 AS one FROM "oauth_applications" WHERE "oauth_applications"."uid" = 'afb5b8ff6d708e36c315ede59418cedf57a1f4c8807d9028ac450ddb131cefcd' LIMIT 1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "oauth_applications" ("name", "redirect_uri", "uid", "secret", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["name", "Beta"], ["redirect_uri", "https://beta.example.com/cms/auth/gate/callback"], ["uid", "afb5b8ff6d708e36c315ede59418cedf57a1f4c8807d9028ac450ddb131cefcd"], ["secret", "431ed0d33aad86dc10790547243662616444a106d4817069a4577a4ee875ce59"], ["created_at", "2015-03-03 07:13:26.193683"], ["updated_at", "2015-03-03 07:13:26.193683"]]
  [1m[35m (0.0ms)[0m  commit transaction
Started GET "/oauth/authorize?client_id=087e7eba0ab22099a6f8864aefd2472ffba2376ab2ebe090d9917c5d63b9ac45&redirect_uri=https%3A%2F%2Falpha.example.com%2Fauth%2Fgate%2Fcallback&response_type=code&state=some_random_string" for 127.0.0.1 at 2015-03-03 08:13:26 +0100
Processing by Doorkeeper::AuthorizationsController#new as HTML
  Parameters: {"client_id"=>"087e7eba0ab22099a6f8864aefd2472ffba2376ab2ebe090d9917c5d63b9ac45", "redirect_uri"=>"https://alpha.example.com/auth/gate/callback", "response_type"=>"code", "state"=>"some_random_string"}
  [1m[36mDoorkeeper::Application Load (0.1ms)[0m  [1mSELECT  "oauth_applications".* FROM "oauth_applications" WHERE "oauth_applications"."uid" = ? LIMIT 1[0m  [["uid", "087e7eba0ab22099a6f8864aefd2472ffba2376ab2ebe090d9917c5d63b9ac45"]]
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36mDoorkeeper::AccessGrant Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "oauth_access_grants" WHERE "oauth_access_grants"."token" = '929cd6e9e82e28fe6d69412f5eaac3185562e1abe17e2f69cf4770982c494cdf' LIMIT 1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "oauth_access_grants" ("application_id", "resource_owner_id", "expires_in", "redirect_uri", "scopes", "token", "created_at") VALUES (?, ?, ?, ?, ?, ?, ?)  [["application_id", 1], ["resource_owner_id", 42], ["expires_in", 600], ["redirect_uri", "https://alpha.example.com/auth/gate/callback"], ["scopes", "outsider"], ["token", "929cd6e9e82e28fe6d69412f5eaac3185562e1abe17e2f69cf4770982c494cdf"], ["created_at", "2015-03-03 07:13:26.227937"]]
  [1m[36m (0.0ms)[0m  [1mcommit transaction[0m
Redirected to https://alpha.example.com/auth/gate/callback?code=929cd6e9e82e28fe6d69412f5eaac3185562e1abe17e2f69cf4770982c494cdf&state=some_random_string
Completed 302 Found in 15ms (ActiveRecord: 0.6ms)
Started GET "/auth/gate/callback?code=[FILTERED]&state=some_random_string" for 127.0.0.1 at 2015-03-03 08:13:26 +0100
  [1m[36m (0.3ms)[0m  [1mCREATE TABLE "oauth_access_grants" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "resource_owner_id" integer NOT NULL, "application_id" integer NOT NULL, "token" varchar NOT NULL, "expires_in" integer NOT NULL, "redirect_uri" text NOT NULL, "created_at" datetime NOT NULL, "revoked_at" datetime, "scopes" varchar) [0m
  [1m[35m (0.1ms)[0m  select sqlite_version(*)
  [1m[36m (0.1ms)[0m  [1mCREATE UNIQUE INDEX "index_oauth_access_grants_on_token" ON "oauth_access_grants" ("token")[0m
  [1m[35m (0.1ms)[0m  CREATE TABLE "oauth_access_tokens" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "resource_owner_id" integer, "application_id" integer, "token" varchar NOT NULL, "refresh_token" varchar, "expires_in" integer, "revoked_at" datetime, "created_at" datetime NOT NULL, "scopes" varchar) 
  [1m[36m (0.1ms)[0m  [1mCREATE UNIQUE INDEX "index_oauth_access_tokens_on_refresh_token" ON "oauth_access_tokens" ("refresh_token")[0m
  [1m[35m (0.2ms)[0m              SELECT sql
            FROM sqlite_master
            WHERE name='index_oauth_access_tokens_on_refresh_token' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='index_oauth_access_tokens_on_refresh_token' AND type='index'

  [1m[36m (0.2ms)[0m  [1mCREATE  INDEX "index_oauth_access_tokens_on_resource_owner_id" ON "oauth_access_tokens" ("resource_owner_id")[0m
  [1m[35m (0.1ms)[0m              SELECT sql
            FROM sqlite_master
            WHERE name='index_oauth_access_tokens_on_resource_owner_id' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='index_oauth_access_tokens_on_resource_owner_id' AND type='index'

  [1m[36m (0.1ms)[0m  [1m            SELECT sql
            FROM sqlite_master
            WHERE name='index_oauth_access_tokens_on_refresh_token' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='index_oauth_access_tokens_on_refresh_token' AND type='index'
[0m
  [1m[35m (0.2ms)[0m  CREATE UNIQUE INDEX "index_oauth_access_tokens_on_token" ON "oauth_access_tokens" ("token")
  [1m[36m (0.2ms)[0m  [1mCREATE TABLE "oauth_applications" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar NOT NULL, "uid" varchar NOT NULL, "secret" varchar NOT NULL, "redirect_uri" text NOT NULL, "scopes" varchar DEFAULT '' NOT NULL, "created_at" datetime, "updated_at" datetime) [0m
  [1m[35m (0.1ms)[0m  CREATE UNIQUE INDEX "index_oauth_applications_on_uid" ON "oauth_applications" ("uid")
  [1m[36m (0.1ms)[0m  [1mCREATE TABLE "schema_migrations" ("version" varchar NOT NULL) [0m
  [1m[35m (0.1ms)[0m  CREATE UNIQUE INDEX "unique_schema_migrations" ON "schema_migrations" ("version")
  [1m[36m (0.0ms)[0m  [1mSELECT version FROM "schema_migrations"[0m
  [1m[35m (0.1ms)[0m  INSERT INTO "schema_migrations" (version) VALUES ('20150303054803')
  [1m[36m (0.3ms)[0m  [1mCREATE TABLE "oauth_access_grants" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "resource_owner_id" integer NOT NULL, "application_id" integer NOT NULL, "token" varchar NOT NULL, "expires_in" integer NOT NULL, "redirect_uri" text NOT NULL, "created_at" datetime NOT NULL, "revoked_at" datetime, "scopes" varchar) [0m
  [1m[35m (0.0ms)[0m  select sqlite_version(*)
  [1m[36m (0.1ms)[0m  [1mCREATE UNIQUE INDEX "index_oauth_access_grants_on_token" ON "oauth_access_grants" ("token")[0m
  [1m[35m (0.1ms)[0m  CREATE TABLE "oauth_access_tokens" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "resource_owner_id" integer, "application_id" integer, "token" varchar NOT NULL, "refresh_token" varchar, "expires_in" integer, "revoked_at" datetime, "created_at" datetime NOT NULL, "scopes" varchar) 
  [1m[36m (0.1ms)[0m  [1mCREATE UNIQUE INDEX "index_oauth_access_tokens_on_refresh_token" ON "oauth_access_tokens" ("refresh_token")[0m
  [1m[35m (0.1ms)[0m              SELECT sql
            FROM sqlite_master
            WHERE name='index_oauth_access_tokens_on_refresh_token' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='index_oauth_access_tokens_on_refresh_token' AND type='index'

  [1m[36m (0.1ms)[0m  [1mCREATE  INDEX "index_oauth_access_tokens_on_resource_owner_id" ON "oauth_access_tokens" ("resource_owner_id")[0m
  [1m[35m (0.1ms)[0m              SELECT sql
            FROM sqlite_master
            WHERE name='index_oauth_access_tokens_on_resource_owner_id' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='index_oauth_access_tokens_on_resource_owner_id' AND type='index'

  [1m[36m (0.1ms)[0m  [1m            SELECT sql
            FROM sqlite_master
            WHERE name='index_oauth_access_tokens_on_refresh_token' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='index_oauth_access_tokens_on_refresh_token' AND type='index'
[0m
  [1m[35m (0.1ms)[0m  CREATE UNIQUE INDEX "index_oauth_access_tokens_on_token" ON "oauth_access_tokens" ("token")
  [1m[36m (0.2ms)[0m  [1mCREATE TABLE "oauth_applications" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar NOT NULL, "uid" varchar NOT NULL, "secret" varchar NOT NULL, "redirect_uri" text NOT NULL, "scopes" varchar DEFAULT '' NOT NULL, "created_at" datetime, "updated_at" datetime) [0m
  [1m[35m (0.1ms)[0m  CREATE UNIQUE INDEX "index_oauth_applications_on_uid" ON "oauth_applications" ("uid")
  [1m[36m (0.1ms)[0m  [1mCREATE TABLE "schema_migrations" ("version" varchar NOT NULL) [0m
  [1m[35m (0.1ms)[0m  CREATE UNIQUE INDEX "unique_schema_migrations" ON "schema_migrations" ("version")
  [1m[36m (0.0ms)[0m  [1mSELECT version FROM "schema_migrations"[0m
  [1m[35m (0.1ms)[0m  INSERT INTO "schema_migrations" (version) VALUES ('20150303054803')
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35mDoorkeeper::Application Exists (0.1ms)[0m  SELECT  1 AS one FROM "oauth_applications" WHERE "oauth_applications"."uid" = '087e7eba0ab22099a6f8864aefd2472ffba2376ab2ebe090d9917c5d63b9ac45' LIMIT 1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "oauth_applications" ("name", "redirect_uri", "uid", "secret", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["name", "Alpha"], ["redirect_uri", "https://alpha.example.com/auth/gate/callback"], ["uid", "087e7eba0ab22099a6f8864aefd2472ffba2376ab2ebe090d9917c5d63b9ac45"], ["secret", "1ce7d7ce7fbd76abafdfa0d0b33ad77e454ecd05f4ed613e5efd12f7fbf89b8a"], ["created_at", "2015-03-03 07:14:55.632667"], ["updated_at", "2015-03-03 07:14:55.632667"]]
  [1m[35m (0.0ms)[0m  commit transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35mDoorkeeper::Application Exists (0.1ms)[0m  SELECT  1 AS one FROM "oauth_applications" WHERE "oauth_applications"."uid" = 'afb5b8ff6d708e36c315ede59418cedf57a1f4c8807d9028ac450ddb131cefcd' LIMIT 1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "oauth_applications" ("name", "redirect_uri", "uid", "secret", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["name", "Beta"], ["redirect_uri", "https://beta.example.com/cms/auth/gate/callback"], ["uid", "afb5b8ff6d708e36c315ede59418cedf57a1f4c8807d9028ac450ddb131cefcd"], ["secret", "431ed0d33aad86dc10790547243662616444a106d4817069a4577a4ee875ce59"], ["created_at", "2015-03-03 07:14:55.635054"], ["updated_at", "2015-03-03 07:14:55.635054"]]
  [1m[35m (0.1ms)[0m  commit transaction
Started GET "/oauth/authorize?client_id=087e7eba0ab22099a6f8864aefd2472ffba2376ab2ebe090d9917c5d63b9ac45&redirect_uri=https%3A%2F%2Falpha.example.com%2Fauth%2Fgate%2Fcallback&response_type=code&state=some_random_string" for 127.0.0.1 at 2015-03-03 08:14:55 +0100
Processing by Doorkeeper::AuthorizationsController#new as HTML
  Parameters: {"client_id"=>"087e7eba0ab22099a6f8864aefd2472ffba2376ab2ebe090d9917c5d63b9ac45", "redirect_uri"=>"https://alpha.example.com/auth/gate/callback", "response_type"=>"code", "state"=>"some_random_string"}
  [1m[36mDoorkeeper::Application Load (0.1ms)[0m  [1mSELECT  "oauth_applications".* FROM "oauth_applications" WHERE "oauth_applications"."uid" = ? LIMIT 1[0m  [["uid", "087e7eba0ab22099a6f8864aefd2472ffba2376ab2ebe090d9917c5d63b9ac45"]]
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36mDoorkeeper::AccessGrant Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "oauth_access_grants" WHERE "oauth_access_grants"."token" = '9ad90ba74c356f50f24b7922c56d90a5e523001029794b1e90e8f4573ca09d59' LIMIT 1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "oauth_access_grants" ("application_id", "resource_owner_id", "expires_in", "redirect_uri", "scopes", "token", "created_at") VALUES (?, ?, ?, ?, ?, ?, ?)  [["application_id", 1], ["resource_owner_id", 42], ["expires_in", 600], ["redirect_uri", "https://alpha.example.com/auth/gate/callback"], ["scopes", "outsider"], ["token", "9ad90ba74c356f50f24b7922c56d90a5e523001029794b1e90e8f4573ca09d59"], ["created_at", "2015-03-03 07:14:55.670248"]]
  [1m[36m (0.0ms)[0m  [1mcommit transaction[0m
Redirected to https://alpha.example.com/auth/gate/callback?code=9ad90ba74c356f50f24b7922c56d90a5e523001029794b1e90e8f4573ca09d59&state=some_random_string
Completed 302 Found in 16ms (ActiveRecord: 0.7ms)
Started GET "/auth/gate/callback?code=[FILTERED]&state=some_random_string" for 127.0.0.1 at 2015-03-03 08:14:55 +0100
  [1m[36m (0.3ms)[0m  [1mCREATE TABLE "oauth_access_grants" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "resource_owner_id" integer NOT NULL, "application_id" integer NOT NULL, "token" varchar NOT NULL, "expires_in" integer NOT NULL, "redirect_uri" text NOT NULL, "created_at" datetime NOT NULL, "revoked_at" datetime, "scopes" varchar) [0m
  [1m[35m (0.0ms)[0m  select sqlite_version(*)
  [1m[36m (0.1ms)[0m  [1mCREATE UNIQUE INDEX "index_oauth_access_grants_on_token" ON "oauth_access_grants" ("token")[0m
  [1m[35m (0.1ms)[0m  CREATE TABLE "oauth_access_tokens" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "resource_owner_id" integer, "application_id" integer, "token" varchar NOT NULL, "refresh_token" varchar, "expires_in" integer, "revoked_at" datetime, "created_at" datetime NOT NULL, "scopes" varchar) 
  [1m[36m (0.1ms)[0m  [1mCREATE UNIQUE INDEX "index_oauth_access_tokens_on_refresh_token" ON "oauth_access_tokens" ("refresh_token")[0m
  [1m[35m (0.1ms)[0m              SELECT sql
            FROM sqlite_master
            WHERE name='index_oauth_access_tokens_on_refresh_token' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='index_oauth_access_tokens_on_refresh_token' AND type='index'

  [1m[36m (0.1ms)[0m  [1mCREATE  INDEX "index_oauth_access_tokens_on_resource_owner_id" ON "oauth_access_tokens" ("resource_owner_id")[0m
  [1m[35m (0.1ms)[0m              SELECT sql
            FROM sqlite_master
            WHERE name='index_oauth_access_tokens_on_resource_owner_id' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='index_oauth_access_tokens_on_resource_owner_id' AND type='index'

  [1m[36m (0.1ms)[0m  [1m            SELECT sql
            FROM sqlite_master
            WHERE name='index_oauth_access_tokens_on_refresh_token' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='index_oauth_access_tokens_on_refresh_token' AND type='index'
[0m
  [1m[35m (0.1ms)[0m  CREATE UNIQUE INDEX "index_oauth_access_tokens_on_token" ON "oauth_access_tokens" ("token")
  [1m[36m (0.3ms)[0m  [1mCREATE TABLE "oauth_applications" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar NOT NULL, "uid" varchar NOT NULL, "secret" varchar NOT NULL, "redirect_uri" text NOT NULL, "scopes" varchar DEFAULT '' NOT NULL, "created_at" datetime, "updated_at" datetime) [0m
  [1m[35m (0.2ms)[0m  CREATE UNIQUE INDEX "index_oauth_applications_on_uid" ON "oauth_applications" ("uid")
  [1m[36m (0.1ms)[0m  [1mCREATE TABLE "schema_migrations" ("version" varchar NOT NULL) [0m
  [1m[35m (0.1ms)[0m  CREATE UNIQUE INDEX "unique_schema_migrations" ON "schema_migrations" ("version")
  [1m[36m (0.0ms)[0m  [1mSELECT version FROM "schema_migrations"[0m
  [1m[35m (0.1ms)[0m  INSERT INTO "schema_migrations" (version) VALUES ('20150303054803')
  [1m[36m (0.3ms)[0m  [1mCREATE TABLE "oauth_access_grants" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "resource_owner_id" integer NOT NULL, "application_id" integer NOT NULL, "token" varchar NOT NULL, "expires_in" integer NOT NULL, "redirect_uri" text NOT NULL, "created_at" datetime NOT NULL, "revoked_at" datetime, "scopes" varchar) [0m
  [1m[35m (0.1ms)[0m  select sqlite_version(*)
  [1m[36m (0.2ms)[0m  [1mCREATE UNIQUE INDEX "index_oauth_access_grants_on_token" ON "oauth_access_grants" ("token")[0m
  [1m[35m (0.3ms)[0m  CREATE TABLE "oauth_access_tokens" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "resource_owner_id" integer, "application_id" integer, "token" varchar NOT NULL, "refresh_token" varchar, "expires_in" integer, "revoked_at" datetime, "created_at" datetime NOT NULL, "scopes" varchar) 
  [1m[36m (0.2ms)[0m  [1mCREATE UNIQUE INDEX "index_oauth_access_tokens_on_refresh_token" ON "oauth_access_tokens" ("refresh_token")[0m
  [1m[35m (0.2ms)[0m              SELECT sql
            FROM sqlite_master
            WHERE name='index_oauth_access_tokens_on_refresh_token' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='index_oauth_access_tokens_on_refresh_token' AND type='index'

  [1m[36m (0.2ms)[0m  [1mCREATE  INDEX "index_oauth_access_tokens_on_resource_owner_id" ON "oauth_access_tokens" ("resource_owner_id")[0m
  [1m[35m (0.1ms)[0m              SELECT sql
            FROM sqlite_master
            WHERE name='index_oauth_access_tokens_on_resource_owner_id' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='index_oauth_access_tokens_on_resource_owner_id' AND type='index'

  [1m[36m (0.1ms)[0m  [1m            SELECT sql
            FROM sqlite_master
            WHERE name='index_oauth_access_tokens_on_refresh_token' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='index_oauth_access_tokens_on_refresh_token' AND type='index'
[0m
  [1m[35m (0.1ms)[0m  CREATE UNIQUE INDEX "index_oauth_access_tokens_on_token" ON "oauth_access_tokens" ("token")
  [1m[36m (0.1ms)[0m  [1mCREATE TABLE "oauth_applications" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar NOT NULL, "uid" varchar NOT NULL, "secret" varchar NOT NULL, "redirect_uri" text NOT NULL, "scopes" varchar DEFAULT '' NOT NULL, "created_at" datetime, "updated_at" datetime) [0m
  [1m[35m (0.1ms)[0m  CREATE UNIQUE INDEX "index_oauth_applications_on_uid" ON "oauth_applications" ("uid")
  [1m[36m (0.1ms)[0m  [1mCREATE TABLE "schema_migrations" ("version" varchar NOT NULL) [0m
  [1m[35m (0.1ms)[0m  CREATE UNIQUE INDEX "unique_schema_migrations" ON "schema_migrations" ("version")
  [1m[36m (0.0ms)[0m  [1mSELECT version FROM "schema_migrations"[0m
  [1m[35m (0.0ms)[0m  INSERT INTO "schema_migrations" (version) VALUES ('20150303054803')
  [1m[36m (0.3ms)[0m  [1mCREATE TABLE "oauth_access_grants" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "resource_owner_id" integer NOT NULL, "application_id" integer NOT NULL, "token" varchar NOT NULL, "expires_in" integer NOT NULL, "redirect_uri" text NOT NULL, "created_at" datetime NOT NULL, "revoked_at" datetime, "scopes" varchar) [0m
  [1m[35m (0.1ms)[0m  select sqlite_version(*)
  [1m[36m (0.1ms)[0m  [1mCREATE UNIQUE INDEX "index_oauth_access_grants_on_token" ON "oauth_access_grants" ("token")[0m
  [1m[35m (0.1ms)[0m  CREATE TABLE "oauth_access_tokens" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "resource_owner_id" integer, "application_id" integer, "token" varchar NOT NULL, "refresh_token" varchar, "expires_in" integer, "revoked_at" datetime, "created_at" datetime NOT NULL, "scopes" varchar) 
  [1m[36m (0.1ms)[0m  [1mCREATE UNIQUE INDEX "index_oauth_access_tokens_on_refresh_token" ON "oauth_access_tokens" ("refresh_token")[0m
  [1m[35m (0.1ms)[0m              SELECT sql
            FROM sqlite_master
            WHERE name='index_oauth_access_tokens_on_refresh_token' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='index_oauth_access_tokens_on_refresh_token' AND type='index'

  [1m[36m (25.1ms)[0m  [1mCREATE  INDEX "index_oauth_access_tokens_on_resource_owner_id" ON "oauth_access_tokens" ("resource_owner_id")[0m
  [1m[35m (0.1ms)[0m              SELECT sql
            FROM sqlite_master
            WHERE name='index_oauth_access_tokens_on_resource_owner_id' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='index_oauth_access_tokens_on_resource_owner_id' AND type='index'

  [1m[36m (0.1ms)[0m  [1m            SELECT sql
            FROM sqlite_master
            WHERE name='index_oauth_access_tokens_on_refresh_token' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='index_oauth_access_tokens_on_refresh_token' AND type='index'
[0m
  [1m[35m (0.1ms)[0m  CREATE UNIQUE INDEX "index_oauth_access_tokens_on_token" ON "oauth_access_tokens" ("token")
  [1m[36m (0.1ms)[0m  [1mCREATE TABLE "oauth_applications" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar NOT NULL, "uid" varchar NOT NULL, "secret" varchar NOT NULL, "redirect_uri" text NOT NULL, "scopes" varchar DEFAULT '' NOT NULL, "created_at" datetime, "updated_at" datetime) [0m
  [1m[35m (0.1ms)[0m  CREATE UNIQUE INDEX "index_oauth_applications_on_uid" ON "oauth_applications" ("uid")
  [1m[36m (0.1ms)[0m  [1mCREATE TABLE "schema_migrations" ("version" varchar NOT NULL) [0m
  [1m[35m (0.1ms)[0m  CREATE UNIQUE INDEX "unique_schema_migrations" ON "schema_migrations" ("version")
  [1m[36m (0.0ms)[0m  [1mSELECT version FROM "schema_migrations"[0m
  [1m[35m (0.1ms)[0m  INSERT INTO "schema_migrations" (version) VALUES ('20150303054803')
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35mDoorkeeper::Application Exists (0.1ms)[0m  SELECT  1 AS one FROM "oauth_applications" WHERE "oauth_applications"."uid" = '087e7eba0ab22099a6f8864aefd2472ffba2376ab2ebe090d9917c5d63b9ac45' LIMIT 1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "oauth_applications" ("name", "redirect_uri", "uid", "secret", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["name", "Alpha"], ["redirect_uri", "https://alpha.example.com/auth/gate/callback"], ["uid", "087e7eba0ab22099a6f8864aefd2472ffba2376ab2ebe090d9917c5d63b9ac45"], ["secret", "1ce7d7ce7fbd76abafdfa0d0b33ad77e454ecd05f4ed613e5efd12f7fbf89b8a"], ["created_at", "2015-03-03 07:16:21.000000"], ["updated_at", "2015-03-03 07:16:21.000000"]]
  [1m[35m (0.0ms)[0m  commit transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35mDoorkeeper::Application Exists (0.1ms)[0m  SELECT  1 AS one FROM "oauth_applications" WHERE "oauth_applications"."uid" = 'afb5b8ff6d708e36c315ede59418cedf57a1f4c8807d9028ac450ddb131cefcd' LIMIT 1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "oauth_applications" ("name", "redirect_uri", "uid", "secret", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["name", "Beta"], ["redirect_uri", "https://beta.example.com/cms/auth/gate/callback"], ["uid", "afb5b8ff6d708e36c315ede59418cedf57a1f4c8807d9028ac450ddb131cefcd"], ["secret", "431ed0d33aad86dc10790547243662616444a106d4817069a4577a4ee875ce59"], ["created_at", "2015-03-03 07:16:21.002462"], ["updated_at", "2015-03-03 07:16:21.002462"]]
  [1m[35m (0.0ms)[0m  commit transaction
Started GET "/oauth/authorize?client_id=087e7eba0ab22099a6f8864aefd2472ffba2376ab2ebe090d9917c5d63b9ac45&redirect_uri=https%3A%2F%2Falpha.example.com%2Fauth%2Fgate%2Fcallback&response_type=code&state=some_random_string" for 127.0.0.1 at 2015-03-03 08:16:21 +0100
Processing by Doorkeeper::AuthorizationsController#new as HTML
  Parameters: {"client_id"=>"087e7eba0ab22099a6f8864aefd2472ffba2376ab2ebe090d9917c5d63b9ac45", "redirect_uri"=>"https://alpha.example.com/auth/gate/callback", "response_type"=>"code", "state"=>"some_random_string"}
  [1m[36mDoorkeeper::Application Load (0.2ms)[0m  [1mSELECT  "oauth_applications".* FROM "oauth_applications" WHERE "oauth_applications"."uid" = ? LIMIT 1[0m  [["uid", "087e7eba0ab22099a6f8864aefd2472ffba2376ab2ebe090d9917c5d63b9ac45"]]
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36mDoorkeeper::AccessGrant Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "oauth_access_grants" WHERE "oauth_access_grants"."token" = '43f2725ad11baa0191c787fb98475c3dcc2c61280fe188de5821430b5f6a150f' LIMIT 1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "oauth_access_grants" ("application_id", "resource_owner_id", "expires_in", "redirect_uri", "scopes", "token", "created_at") VALUES (?, ?, ?, ?, ?, ?, ?)  [["application_id", 1], ["resource_owner_id", 42], ["expires_in", 600], ["redirect_uri", "https://alpha.example.com/auth/gate/callback"], ["scopes", "outsider"], ["token", "43f2725ad11baa0191c787fb98475c3dcc2c61280fe188de5821430b5f6a150f"], ["created_at", "2015-03-03 07:16:21.039878"]]
  [1m[36m (0.0ms)[0m  [1mcommit transaction[0m
Redirected to https://alpha.example.com/auth/gate/callback?code=43f2725ad11baa0191c787fb98475c3dcc2c61280fe188de5821430b5f6a150f&state=some_random_string
Completed 302 Found in 15ms (ActiveRecord: 0.6ms)
Started GET "/auth/gate/callback?code=[FILTERED]&state=some_random_string" for 127.0.0.1 at 2015-03-03 08:16:21 +0100
